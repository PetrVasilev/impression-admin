(this["webpackJsonpinvoyager-moderator"]=this["webpackJsonpinvoyager-moderator"]||[]).push([[0],{44:function(e,t,n){e.exports=n(67)},45:function(e,t,n){},52:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);n(45),n(46);var a=n(0),r=n.n(a),c=n(35),o=n.n(c),l=n(20),i=n.n(l),m=n(22),u=n(19),s=n(9);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=n(43),g=n(18),f=n(4),p=n(13),E=n.n(p),b=n(14),v=(n(52),function(e){var t=e.moderator,n=void 0===t?{}:t;return r.a.createElement(f.j.Header,null,r.a.createElement("div",{className:"header-container"},r.a.createElement(m.b,{to:"/"},r.a.createElement("img",{src:"/logo-vertical.png",alt:"inVoyager",className:"logo hovering"})),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"name"},n.login),r.a.createElement("div",{onClick:function(){localStorage.clear(),window.open("/login","_self")},className:"logout hovering"},r.a.createElement(f.h,{prefix:"fe",name:"log-out"})))))});function h(){var e=Object(g.a)(["\n    {\n        moderator {\n            id\n            login\n        }\n    }\n"]);return h=function(){return e},e}var j=E()(h()),k=function(e){var t=e.children,n=e.history,a=Object(d.a)(e,["children","history"]),c=Object(b.b)(j,{onError:function(){n.replace("/login")}}),o=c.data;if(c.loading)return r.a.createElement("div",{className:"loading-container"},r.a.createElement(f.i,null));var l=o?o.moderator:{};return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,Object.assign({moderator:l},a)),r.a.createElement(f.f,{className:"content"},t))},w=function(e,t){return r.a.createElement(k,e,r.a.createElement(t,e))},O=n(42),y="http://185.125.218.12:1119",N="".concat(y,"/graphql"),C=new O.a({uri:N,request:function(e){var t=localStorage.getItem("token");e.setContext({headers:{authorization:t||""}})}}),S=n(17);n(62);function $(){var e=Object(g.a)(["\n    mutation login($login: String!, $password: String!) {\n        login(login: $login, password: $password) {\n            token\n        }\n    }\n"]);return $=function(){return e},e}var x=E()($()),H=function(e){var t=e.history,n=Object(b.a)(x,{onCompleted:function(e){var n=e.login.token;localStorage.setItem("token",n),t.replace("/")}}),c=Object(S.a)(n,2),o=c[0],l=c[1],i=l.loading,m=l.error,u=Object(a.useState)(""),s=Object(S.a)(u,2),d=s[0],g=s[1],p=Object(a.useState)(""),E=Object(S.a)(p,2),v=E[0],h=E[1];return r.a.createElement("div",{className:"login-page"},r.a.createElement("img",{className:"logo",src:"/logo.png",alt:"inVoyager"}),r.a.createElement(f.d,null,r.a.createElement("div",{className:"card-title"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u043f\u0430\u043d\u0435\u043b\u044c \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u0430"),r.a.createElement(f.g,{onSubmit:function(e){e.preventDefault(),o({variables:{login:d,password:v}})}},r.a.createElement(f.g.Group,{label:"\u041b\u043e\u0433\u0438\u043d"},r.a.createElement(f.g.Input,{value:d,onChange:function(e){return g(e.target.value)},name:"login",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d...",required:!0})),r.a.createElement(f.g.Group,{label:"\u041f\u0430\u0440\u043e\u043b\u044c"},r.a.createElement(f.g.Input,{value:v,onChange:function(e){return h(e.target.value)},name:"password",type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c...",required:!0,feedback:m?"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c":null,invalid:!!m})),r.a.createElement(f.g.Footer,null,r.a.createElement(f.c,{loading:i,type:"submit",className:"login-button",color:"primary"},"\u0412\u043e\u0439\u0442\u0438")))))};n(63);function D(){var e=Object(g.a)(["\n    {\n        confirms {\n            id\n            user {\n                id\n                name\n                phone\n                image\n            }\n            status\n            comment\n            createdAt\n            document\n        }\n    }\n"]);return D=function(){return e},e}var I=E()(D()),Y=function(){var e=Object(b.b)(I),t=e.loading,n=e.data,a=n?n.confirms:[];return r.a.createElement(f.d,{className:"table-card"},r.a.createElement(f.k,null,r.a.createElement(f.k.Header,null,r.a.createElement("tr",null,r.a.createElement(f.k.ColHeader,null,"\u0418\u043c\u044f"),r.a.createElement(f.k.ColHeader,null,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),r.a.createElement(f.k.ColHeader,null,"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(f.k.ColHeader,null,"\u0421\u043e\u0437\u0434\u0430\u043d"))),a.length>0&&r.a.createElement(f.k.Body,null,a.map((function(e){return r.a.createElement(f.k.Row,{key:e.id},r.a.createElement(f.k.Col,null,r.a.createElement(m.b,{to:"/confirm/".concat(e.id)},e.user.name)),r.a.createElement(f.k.Col,null,"+",e.user.phone),r.a.createElement(f.k.Col,null,function(e){switch(e){case"confirmed":return r.a.createElement(f.b,{color:"success"},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d");case"rejected":return r.a.createElement(f.b,{color:"danger"},"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d");default:return r.a.createElement(f.b,{color:"warning"},"\u041d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d")}}(e.status)),r.a.createElement(f.k.Col,null,i()(e.createdAt).format("DD.MM.YYYY HH:mm")))})))),t&&r.a.createElement("div",{className:"table-loading"},r.a.createElement(f.i,{className:"table-loader"})))},q=n(25),A=n.n(q),M=n(32);n(65);function B(){var e=Object(g.a)(["\n    mutation updateConfirm($id: ID!, $status: String!, $comment: String) {\n        updateConfirm(where: { id: $id }, data: { status: $status, comment: $comment }) {\n            id\n            user {\n                id\n                name\n                phone\n                image\n            }\n            status\n            comment\n            createdAt\n            document\n        }\n    }\n"]);return B=function(){return e},e}function F(){var e=Object(g.a)(["\n    query confirm($id: ID!) {\n        confirm(where: { id: $id }) {\n            id\n            user {\n                id\n                name\n                phone\n                image\n            }\n            status\n            comment\n            createdAt\n            document\n        }\n    }\n"]);return F=function(){return e},e}var G=E()(F()),J=E()(B()),R=function(e){switch(e){case"confirmed":return r.a.createElement(f.b,{color:"success"},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d");case"rejected":return r.a.createElement(f.b,{color:"danger"},"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d");default:return r.a.createElement(f.b,{color:"warning"},"\u041d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d")}},V=function(e){var t=e.match.params.id,n=Object(b.b)(G,{variables:{id:t}}),c=n.loading,o=n.data,l=Object(a.useState)({visible:!1}),m=Object(S.a)(l,2),u=m[0],s=m[1],d=Object(a.useState)(!1),g=Object(S.a)(d,2),p=g[0],E=g[1],v=Object(a.useState)(""),h=Object(S.a)(v,2),j=h[0],k=h[1],w=Object(b.a)(J),O=Object(S.a)(w,2),N=O[0],C=O[1].loading,$=Object(b.a)(J),x=Object(S.a)($,2),H=x[0],D=x[1].loading,I=o?o.confirm:{},Y=I.user?I.user:{},q=Y.image?"".concat(y,"/images/").concat(Y.image):"/default-user.jpg",B=function(){var e=Object(M.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s({visible:!1}),e.next=4,N({variables:{id:t,status:"confirmed",comment:""}});case 4:s({visible:!0,type:"success",message:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),s({visible:!0,type:"danger",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(M.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,s({visible:!1}),e.next=5,H({variables:{id:t,status:"rejected",comment:j}});case 5:s({visible:!0,type:"success",message:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d"}),E(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),s({visible:!0,type:"danger",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(f.d,{className:"confirm-card"},c?r.a.createElement("div",{className:"confirm-loading"},r.a.createElement(f.i,{className:"confirm-loader"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.e,{cardTitle:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",rounded:!0,objectURL:q,alt:q,details:[{title:"\u0418\u043c\u044f",content:Y.name},{title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",content:"+"+Y.phone},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",content:R(I.status)},{title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0441\u0442\u0430\u0442\u0443\u0441\u0443",content:I.comment?I.comment:"-"},{title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442",content:r.a.createElement("img",{className:"document-image",src:"".concat(y,"/images/").concat(I.document),alt:I.document})},{title:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",content:i()(I.createdAt).format("DD.MM.YYYY HH:mm")}]}),u.visible&&r.a.createElement(f.a,{isDismissible:!0,type:u.type},u.message),r.a.createElement("div",{className:"confirm-actions"},r.a.createElement(f.c,{onClick:B,loading:C,color:"success"},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"),r.a.createElement(f.c,{onClick:function(){return E((function(e){return!e}))},color:"danger"},"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c")),p&&r.a.createElement(f.g,{className:"comment-form",onSubmit:F},r.a.createElement(f.g.Group,{label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},r.a.createElement(f.g.Input,{required:!0,name:"comment",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439...",value:j,onChange:function(e){return k(e.target.value)}})),r.a.createElement(f.c,{loading:D,type:"submit",color:"info"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))};i.a.locale("ru");o.a.render(r.a.createElement((function(){return r.a.createElement(s.a,{client:C},r.a.createElement(m.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:function(e){return w(e,Y)}}),r.a.createElement(u.a,{path:"/confirm/:id",exact:!0,component:function(e){return w(e,V)}}),r.a.createElement(u.a,{path:"/login",exact:!0,component:H}))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.362577fb.chunk.js.map